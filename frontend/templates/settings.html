<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—É–±–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –º–æ–¥–∞–ª–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã */
        #addGroupModal .modal-content::-webkit-scrollbar,
        #addGroupModal .modal-body::-webkit-scrollbar,
        #editGroupModal .modal-content::-webkit-scrollbar,
        #editGroupModal .modal-body::-webkit-scrollbar {
            width: 12px !important;
            height: 12px !important;
            background: transparent !important;
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ - —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        #addGroupModal .modal-content::-webkit-scrollbar-track,
        #addGroupModal .modal-body::-webkit-scrollbar-track,
        #editGroupModal .modal-content::-webkit-scrollbar-track,
        #editGroupModal .modal-body::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5) !important;
            border-radius: 12px !important;
            border: 1px solid rgba(51, 65, 85, 0.5) !important;
            margin: 8px 0 !important;
        }

        #addGroupModal .modal-content::-webkit-scrollbar-thumb,
        #addGroupModal .modal-body::-webkit-scrollbar-thumb,
        #editGroupModal .modal-content::-webkit-scrollbar-thumb,
        #editGroupModal .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-radius: 12px !important;
            border: 2px solid rgba(30, 41, 59, 0.5) !important;
            min-height: 40px !important;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        #addGroupModal .modal-content::-webkit-scrollbar-thumb:hover,
        #addGroupModal .modal-body::-webkit-scrollbar-thumb:hover,
        #editGroupModal .modal-content::-webkit-scrollbar-thumb:hover,
        #editGroupModal .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f91 100%) !important;
            border-color: rgba(51, 65, 85, 0.7) !important;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.15) !important;
            transform: scale(1.05) !important;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ - —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        body.theme-light #addGroupModal .modal-content::-webkit-scrollbar-track,
        body.theme-light #addGroupModal .modal-body::-webkit-scrollbar-track,
        body.theme-light #editGroupModal .modal-content::-webkit-scrollbar-track,
        body.theme-light #editGroupModal .modal-body::-webkit-scrollbar-track {
            background: #e5e7eb !important;
            border-radius: 12px !important;
            border: 1px solid #d1d5db !important;
            margin: 8px 0 !important;
        }

        body.theme-light #addGroupModal .modal-content::-webkit-scrollbar-thumb,
        body.theme-light #addGroupModal .modal-body::-webkit-scrollbar-thumb,
        body.theme-light #editGroupModal .modal-content::-webkit-scrollbar-thumb,
        body.theme-light #editGroupModal .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-radius: 12px !important;
            border: 2px solid #e5e7eb !important;
            min-height: 40px !important;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        body.theme-light #addGroupModal .modal-content::-webkit-scrollbar-thumb:hover,
        body.theme-light #addGroupModal .modal-body::-webkit-scrollbar-thumb:hover,
        body.theme-light #editGroupModal .modal-content::-webkit-scrollbar-thumb:hover,
        body.theme-light #editGroupModal .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f91 100%) !important;
            border-color: #cbd5e1 !important;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.15) !important;
            transform: scale(1.05) !important;
        }

        /* –î–ª—è Firefox */
        #addGroupModal .modal-content,
        #addGroupModal .modal-body,
        #editGroupModal .modal-content,
        #editGroupModal .modal-body {
            scrollbar-width: thin !important;
            scrollbar-color: #667eea rgba(30, 41, 59, 0.5) !important;
        }

        body.theme-light #addGroupModal .modal-content,
        body.theme-light #addGroupModal .modal-body,
        body.theme-light #editGroupModal .modal-content,
        body.theme-light #editGroupModal .modal-body {
            scrollbar-width: thin !important;
            scrollbar-color: #667eea #e5e7eb !important;
        }

        #addGroupModal .modal-content::-webkit-scrollbar-corner,
        #editGroupModal .modal-content::-webkit-scrollbar-corner {
            background: transparent !important;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar {
            width: 12px !important;
            height: 12px !important;
            background: transparent !important;
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ - —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5) !important;
            border-radius: 12px !important;
            border: 1px solid rgba(51, 65, 85, 0.5) !important;
            margin: 8px 4px !important;
        }

        .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-radius: 12px !important;
            border: 2px solid rgba(30, 41, 59, 0.5) !important;
            min-height: 40px !important;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f91 100%) !important;
            border-color: rgba(51, 65, 85, 0.7) !important;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.15) !important;
            transform: scale(1.05) !important;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ - —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        body.theme-light .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-track {
            background: #e5e7eb !important;
            border-radius: 12px !important;
            border: 1px solid #d1d5db !important;
            margin: 8px 4px !important;
        }

        body.theme-light .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-radius: 12px !important;
            border: 2px solid #e5e7eb !important;
            min-height: 40px !important;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        body.theme-light .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f91 100%) !important;
            border-color: #cbd5e1 !important;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.15) !important;
            transform: scale(1.05) !important;
        }

        /* –î–ª—è Firefox */
        .game-layout>div[style*="overflow-y: auto"] {
            scrollbar-width: thin !important;
            scrollbar-color: #667eea rgba(30, 41, 59, 0.5) !important;
        }

        body.theme-light .game-layout>div[style*="overflow-y: auto"] {
            scrollbar-width: thin !important;
            scrollbar-color: #667eea #e5e7eb !important;
        }

        .game-layout>div[style*="overflow-y: auto"]::-webkit-scrollbar-corner {
            background: transparent !important;
        }

        /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è main-content */
        .game-main-content {
            background: var(--theme-bg-primary);
            min-height: 100vh;
            padding: 0 !important;
            margin-left: 280px !important;
            width: calc(100% - 280px) !important;
        }

        body.theme-light .game-main-content {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ —Å–≤–µ—Ä–Ω—É—Ç–æ–º sidebar */
        body:has(.sidebar.collapsed) .game-main-content,
        .sidebar.collapsed~.main-content.game-main-content {
            margin-left: 80px !important;
            width: calc(100% - 80px) !important;
        }

        /* –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∏–ª–∏ */
        .game-layout {
            display: flex;
            flex-direction: column;
            gap: 0;
            height: 100vh;
            background: var(--theme-bg-primary);
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        body.theme-light .game-layout {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .card {
            background: var(--theme-card-bg);
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--theme-border);
            transition: all 0.3s ease;
            margin-bottom: 24px;
            color: var(--theme-text-primary);
        }

        body.theme-light .card {
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .card:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-group label {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--theme-text-primary);
            font-size: 0.95rem;
            letter-spacing: -0.01em;
            gap: 6px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 0.95rem;
            background: #ffffff;
            transition: all 0.3s ease;
            color: #1a202c;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            outline: none;
            transform: translateY(-1px);
        }

        .form-group input::placeholder {
            color: var(--theme-text-tertiary);
        }

        .form-group small {
            color: var(--theme-text-tertiary);
            font-size: 0.85rem;
            margin-top: 8px;
            display: block;
            line-height: 1.6;
            transition: color 0.3s ease;
            font-weight: 400;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π */
        .day-toggle-group {
            display: grid;
            grid-template-columns: repeat(7, minmax(60px, 1fr));
            gap: 10px;
        }

        .day-toggle {
            padding: 12px 8px;
            border: 2px solid var(--theme-input-border);
            border-radius: 12px;
            background: var(--theme-input-bg);
            cursor: pointer;
            font-weight: 600;
            color: var(--theme-text-primary);
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-align: center;
        }

        .day-toggle:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .day-toggle.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border-color: #667eea;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ */
        .settings-form .checkbox-label,
        .settings-section-content .checkbox-label {
            display: flex !important;
            align-items: center !important;
            gap: 14px !important;
            padding: 0 !important;
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            cursor: pointer !important;
            transition: none !important;
            color: var(--theme-text-primary) !important;
            margin: 0 !important;
        }

        .settings-form .checkbox-label:hover,
        .settings-section-content .checkbox-label:hover {
            border: none !important;
            background: transparent !important;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —á–µ–∫–±–æ–∫—Å —Å –≤—ã—Å–æ–∫–æ–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å—é */
        .settings-form .checkbox-label input[type="checkbox"],
        .settings-section-content .checkbox-label input[type="checkbox"],
        #settingsForm .checkbox-label input[type="checkbox"] {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            width: 22px !important;
            height: 22px !important;
            min-width: 22px !important;
            max-width: 22px !important;
            border: 2px solid #cbd5e1 !important;
            border-radius: 6px !important;
            background: #ffffff !important;
            cursor: pointer !important;
            position: relative !important;
            transition: all 0.2s ease !important;
            margin: 0 !important;
            flex-shrink: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
            transform: none !important;
        }

        body.theme-light .settings-form .checkbox-label input[type="checkbox"],
        body.theme-light .settings-section-content .checkbox-label input[type="checkbox"],
        .settings-form .checkbox-label input[type="checkbox"],
        .settings-section-content .checkbox-label input[type="checkbox"] {
            border-color: #cbd5e1 !important;
            background: #ffffff !important;
        }

        .settings-form .checkbox-label input[type="checkbox"]:hover,
        .settings-section-content .checkbox-label input[type="checkbox"]:hover {
            border-color: #667eea !important;
            background: #f8faff !important;
        }

        .settings-form .checkbox-label input[type="checkbox"]:checked,
        .settings-section-content .checkbox-label input[type="checkbox"]:checked {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-color: #667eea !important;
        }

        .settings-form .checkbox-label input[type="checkbox"]:checked::after,
        .settings-section-content .checkbox-label input[type="checkbox"]:checked::after {
            content: '‚úì' !important;
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            color: white !important;
            font-size: 14px !important;
            font-weight: bold !important;
            line-height: 1 !important;
            display: block !important;
        }

        .settings-form .checkbox-label input[type="checkbox"]:not(:checked)::after,
        .settings-section-content .checkbox-label input[type="checkbox"]:not(:checked)::after {
            display: none !important;
        }

        /* –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —á–µ–∫–±–æ–∫—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        #main-settings-tab input[type="checkbox"],
        .settings-tab-content input[type="checkbox"] {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            width: 22px !important;
            height: 22px !important;
            min-width: 22px !important;
            max-width: 22px !important;
            border: 2px solid #cbd5e1 !important;
            border-radius: 6px !important;
            background: #ffffff !important;
            cursor: pointer !important;
            position: relative !important;
            transition: all 0.2s ease !important;
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
            transform: none !important;
            flex-shrink: 0 !important;
        }

        #main-settings-tab input[type="checkbox"]:hover,
        .settings-tab-content input[type="checkbox"]:hover {
            border-color: #667eea !important;
            background: #f8faff !important;
        }

        #main-settings-tab input[type="checkbox"]:checked,
        .settings-tab-content input[type="checkbox"]:checked {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-color: #667eea !important;
        }

        #main-settings-tab input[type="checkbox"]:checked::after,
        .settings-tab-content input[type="checkbox"]:checked::after {
            content: '‚úì' !important;
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            color: white !important;
            font-size: 14px !important;
            font-weight: bold !important;
            line-height: 1 !important;
            display: block !important;
        }

        .checkbox-label span {
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--theme-text-primary);
            line-height: 1.5;
            user-select: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .btn-primary.btn-large {
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            margin-top: 8px;
        }

        .btn-primary.btn-large:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(102, 126, 234, 0.4);
        }

        .btn-primary.btn-large:active {
            transform: translateY(0);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è form-row */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }


        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 28px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--theme-border);
            transition: border-color 0.3s ease;
        }

        .settings-card-icon {
            font-size: 32px;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 14px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .settings-card-title {
            margin: 0;
            font-size: 22px;
            font-weight: 700;
            color: var(--theme-text-primary);
            transition: color 0.3s ease;
        }

        .settings-card-subtitle {
            margin: 4px 0 0 0;
            font-size: 14px;
            color: var(--theme-text-tertiary);
            font-weight: 400;
            transition: color 0.3s ease;
        }

        .settings-form {
            margin-top: 8px;
        }

        .form-input-modern {
            background: var(--theme-input-bg) !important;
            border: 2px solid var(--theme-input-border) !important;
            color: var(--theme-text-primary) !important;
        }

        .expense-category-input {
            position: relative;
            padding: 14px 16px 14px 48px;
            border-radius: 14px;
            border-color: #94a3b8 !important;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.06) 0%, rgba(118, 75, 162, 0.06) 100%);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.12);
        }

        .expense-category-input:focus {
            border-color: #7c3aed !important;
            box-shadow: 0 12px 36px rgba(124, 58, 237, 0.22), 0 0 0 4px rgba(124, 58, 237, 0.15);
            transform: translateY(-1px);
        }

        .expense-category-input::placeholder {
            color: #94a3b8;
        }

        .form-input-modern:focus {
            border-color: #667eea !important;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1) !important;
            outline: none !important;
        }

        .form-input-modern::placeholder {
            color: var(--theme-text-tertiary) !important;
        }

        .settings-form-actions {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--theme-border);
        }

        body.theme-light .settings-form-actions {
            border-top: 1px solid #e2e8f0;
        }

        .form-input-modern {
            transition: all 0.3s ease;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-section {
            margin-bottom: 28px;
            background: transparent;
            border: none;
            border-radius: 0;
            overflow: visible;
            transition: none;
        }

        .settings-section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0 0 16px 0;
            margin-bottom: 20px;
            background: transparent;
            border-bottom: 1px solid var(--theme-border);
        }

        body.theme-light .settings-section-header {
            border-bottom: 1px solid #e2e8f0;
        }

        .settings-section-icon {
            font-size: 20px;
            width: auto;
            height: auto;
            display: inline-block;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
        }

        .settings-section-title {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: var(--theme-text-primary);
            letter-spacing: -0.01em;
        }

        .settings-section-content {
            padding: 0;
        }

        .payment-method-list {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 16px;
        }

        .payment-method-item {
            background: var(--theme-bg-secondary);
            border: 1px solid var(--theme-border);
            border-radius: 14px;
            padding: 16px;
        }

        body.theme-light .payment-method-item {
            background: #ffffff;
            border-color: #e2e8f0;
        }

        .payment-method-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 12px;
        }

        .payment-method-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-method-icon {
            width: 28px;
            height: 28px;
            object-fit: contain;
            border-radius: 6px;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 4px;
        }

        .payment-method-name {
            font-size: 15px;
            font-weight: 600;
            color: var(--theme-text-primary);
        }

        .switch-toggle {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .switch-toggle input {
            display: none;
        }

        .switch-slider {
            width: 44px;
            height: 24px;
            background: var(--theme-input-border);
            border-radius: 999px;
            position: relative;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .switch-slider::after {
            content: '';
            width: 18px;
            height: 18px;
            background: #ffffff;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 3px;
            transition: all 0.2s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .switch-toggle input:checked + .switch-slider {
            background: #667eea;
        }

        .switch-toggle input:checked + .switch-slider::after {
            transform: translateX(20px);
        }

        .payment-method-input label {
            font-size: 13px;
            color: var(--theme-text-secondary);
            margin-bottom: 6px;
            display: block;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        @media (max-width: 768px) {
            .payment-method-list {
                grid-template-columns: 1fr;
            }
            .form-row {
                grid-template-columns: 1fr;
            }

            .main-content {
                padding: 20px;
            }

            .page-header h1 {
                font-size: 24px;
            }

            .card {
                padding: 24px;
            }

            .settings-card-header {
                flex-direction: column;
                text-align: center;
            }

            .settings-card-icon {
                margin: 0 auto;
            }

            .day-toggle-group {
                grid-template-columns: repeat(4, 1fr);
            }

            .settings-section {
                margin-bottom: 24px;
            }

            .settings-section-header {
                padding: 16px 20px;
            }

            .settings-section-content {
                padding: 20px;
            }

            .settings-section-icon {
                width: 36px;
                height: 36px;
                font-size: 20px;
            }

            .settings-section-title {
                font-size: 16px;
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ */
        .settings-tabs {
            display: flex;
            gap: 0;
            margin: 0;
            border-bottom: none;
            background: var(--theme-bg-secondary);
            padding: 0 24px;
            height: 100%;
            align-items: stretch;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .settings-tabs::-webkit-scrollbar {
            display: none;
        }

        .settings-tab {
            padding: 0 24px;
            background: transparent;
            border: none;
            border-bottom: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--theme-text-tertiary);
            transition: all 0.3s;
            position: relative;
            display: flex;
            align-items: center;
            height: 100%;
            box-sizing: border-box;
            flex: 0 0 auto;
            white-space: nowrap;
        }

        .settings-tab:hover {
            color: var(--theme-text-primary);
            background: var(--theme-bg-tertiary);
        }

        .settings-tab.active {
            color: #667eea;
            background: var(--theme-bg-secondary);
            font-weight: 600;
        }

        .settings-tab-content {
            display: none;
        }

        .settings-tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="settings-page">
    {% include '_sidebar.html' %}

    <div class="main-content game-main-content">
        <!-- –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
        <div class="game-layout">
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ -->
            <div class="game-top-bar">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="main-settings">‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="settings-tab" data-tab="finances">üí∞ –§–∏–Ω–∞–Ω—Å—ã</button>
                    <button class="settings-tab" data-tab="telegram">üì± Telegram</button>
                    <button class="settings-tab" data-tab="groups">üë®‚Äçüë©‚Äçüë¶ –ì—Ä—É–ø–ø—ã</button>
                    <button class="settings-tab" data-tab="tariffs">üí≥ –¢–∞—Ä–∏—Ñ—ã</button>
                    <button class="settings-tab" data-tab="rewards">üèÜ –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è</button>
                    <button class="settings-tab" data-tab="camera">üé• –ö–∞–º–µ—Ä–∞</button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
            <div style="flex: 1; overflow-y: auto; padding: 24px;">
                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–∏ -->
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin-bottom: 20px;">
                    <button class="btn-success" id="addGroupBtnHeader" onclick="showAddGroupModal()"
                        style="display: none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
                    <button id="addTariffBtnHeader" class="btn-primary" style="display: none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</button>
                    <button id="addRewardBtnHeader" class="btn-primary" style="display: none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å
                        –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ</button>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div id="main-settings-tab" class="settings-tab-content active">
                    <div class="card settings-main-card" style="max-width: 900px; margin: 0 auto;">
                        <div class="settings-card-header">
                            <div class="settings-card-icon">‚öôÔ∏è</div>
                            <div>
                                <h2 class="settings-card-title">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                                <p class="settings-card-subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã –∫–ª—É–±–∞</p>
                            </div>
                        </div>
                        <form id="settingsForm" class="settings-form">
                            <!-- –°–µ–∫—Ü–∏—è: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üè∑Ô∏è</span>
                                    <h3 class="settings-section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üè∑Ô∏è</span>
                                            –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã *
                                        </label>
                                        <input type="text" id="system_name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: FK QORASUV"
                                            class="form-input-modern">
                                    </div>
                                </div>
                            </div>

                            <!-- –°–µ–∫—Ü–∏—è: –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üïê</span>
                                    <h3 class="settings-section-title">–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üìÖ</span>
                                            –†–∞–±–æ—á–∏–µ –¥–Ω–∏
                                        </label>
                                        <div id="working-days" class="day-toggle-group">
                                            <button type="button" class="day-toggle" data-day="1">–ü–Ω</button>
                                            <button type="button" class="day-toggle" data-day="2">–í—Ç</button>
                                            <button type="button" class="day-toggle" data-day="3">–°—Ä</button>
                                            <button type="button" class="day-toggle" data-day="4">–ß—Ç</button>
                                            <button type="button" class="day-toggle" data-day="5">–ü—Ç</button>
                                            <button type="button" class="day-toggle" data-day="6">–°–±</button>
                                            <button type="button" class="day-toggle" data-day="7">–í—Å</button>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>
                                                <span style="margin-right: 6px;">üïê</span>
                                                –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
                                            </label>
                                            <input type="time" id="work_start_time" required class="form-input-modern">
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <span style="margin-right: 6px;">üïê</span>
                                                –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã
                                            </label>
                                            <input type="time" id="work_end_time" required class="form-input-modern">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üë•</span>
                                            –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å—Ç–∞–¥–∏–æ–Ω–∞
                                        </label>
                                        <input type="number" id="max_groups_per_slot" min="1" required
                                            class="form-input-modern">
                                    </div>
                                </div>
                            </div>

                            <!-- –°–µ–∫—Ü–∏—è: –ü–ª–∞—Ç–µ–∂–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üí≥</span>
                                    <h3 class="settings-section-title">–ü–ª–∞—Ç–µ–∂–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã</h3>
                                </div>
                                <div class="settings-section-content">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="block_future_payments">
                                        <span>–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –æ–ø–ª–∞—Ç—ã –∑–∞ –±—É–¥—É—â–∏–µ –º–µ—Å—è—Ü—ã</span>
                                    </label>

                                    <div style="margin-top: 20px;">
                                        <h4 style="margin: 0 0 12px 0; font-size: 15px; color: var(--theme-text-primary);">
                                            –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
                                        </h4>
                                        <div class="payment-method-list">
                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/click.png') }}" alt="Click" class="payment-method-icon">
                                                        <div class="payment-method-name">Click</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_click_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_click_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_click_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/payme.png') }}" alt="Payme" class="payment-method-icon">
                                                        <div class="payment-method-name">Payme</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_payme_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_payme_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_payme_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/uzum.png') }}" alt="Uzum" class="payment-method-icon">
                                                        <div class="payment-method-name">Uzum</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_uzum_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_uzum_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_uzum_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/paynet.png') }}" alt="Paynet" class="payment-method-icon">
                                                        <div class="payment-method-name">Paynet</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_paynet_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_paynet_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_paynet_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/xazna.png') }}" alt="Xazna" class="payment-method-icon">
                                                        <div class="payment-method-name">Xazna</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_xazna_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_xazna_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_xazna_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/oson.jpeg') }}" alt="Oson" class="payment-method-icon">
                                                        <div class="payment-method-name">Oson</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_oson_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                                <div class="payment-method-input">
                                                    <label for="payment_oson_qr_url">–°—Å—ã–ª–∫–∞ –Ω–∞ QR-–∫–æ–¥</label>
                                                    <input type="text" id="payment_oson_qr_url" class="form-input-modern"
                                                        placeholder="https://...">
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/card.png') }}" alt="UZCARD" class="payment-method-icon">
                                                        <div class="payment-method-name">UZCARD</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_uzcard_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <img src="{{ url_for('static', filename='uploads/humo.png') }}" alt="HUMO" class="payment-method-icon">
                                                        <div class="payment-method-name">HUMO</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_humo_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="payment-method-item">
                                                <div class="payment-method-row">
                                                    <div class="payment-method-title">
                                                        <div class="payment-method-icon" style="display:flex;align-items:center;justify-content:center;">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                                                <path d="M10 18v-7" />
                                                                <path d="M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z" />
                                                                <path d="M14 18v-7" />
                                                                <path d="M18 18v-7" />
                                                                <path d="M3 22h18" />
                                                                <path d="M6 18v-7" />
                                                            </svg>
                                                        </div>
                                                        <div class="payment-method-name">–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ</div>
                                                    </div>
                                                    <label class="switch-toggle">
                                                        <input type="checkbox" id="payment_transfer_enabled">
                                                        <span class="switch-slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- –°–µ–∫—Ü–∏—è: –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üèÜ</span>
                                    <h3 class="settings-section-title">–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –∏ —Ä–µ–π—Ç–∏–Ω–≥</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üîÑ</span>
                                            –ü–µ—Ä–∏–æ–¥ —Å–±—Ä–æ—Å–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π
                                        </label>
                                        <select id="rewards_reset_period_months" required class="form-input-modern">
                                            <option value="1">1 –º–µ—Å—è—Ü</option>
                                            <option value="2">2 –º–µ—Å—è—Ü–∞</option>
                                            <option value="3">3 –º–µ—Å—è—Ü–∞</option>
                                            <option value="4">4 –º–µ—Å—è—Ü–∞</option>
                                            <option value="5">5 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="6">6 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="7">7 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="8">8 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="9">9 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="10">10 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="11">11 –º–µ—Å—è—Ü–µ–≤</option>
                                            <option value="12">12 –º–µ—Å—è—Ü–µ–≤</option>
                                        </select>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">–ß–µ—Ä–µ–∑
                                            —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –±—É–¥—É—Ç –æ–±–Ω—É–ª—è—Ç—å—Å—è</small>
                                    </div>

                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üèÜ</span>
                                            –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—å–µ–¥–µ—Å—Ç–∞–ª–∞
                                        </label>
                                        <select id="podium_display_count" required class="form-input-modern">
                                            <option value="5">5 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="10">10 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="15">15 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="20">20 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="25">25 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="30">30 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="35">35 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="40">40 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="45">45 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                            <option value="50">50 —É—á–µ–Ω–∏–∫–æ–≤</option>
                                        </select>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
                                            —É—á–µ–Ω–∏–∫–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—å–µ–¥–µ—Å—Ç–∞–ª–µ (–æ—Ç 5 –¥–æ 50 —Å —à–∞–≥–æ–º 5)</small>
                                    </div>
                                </div>
                            </div>


                            <div class="settings-form-actions">
                                <button type="submit" class="btn-primary btn-large">
                                    <span style="margin-right: 8px;">üíæ</span>
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –§–∏–Ω–∞–Ω—Å—ã -->
                <div id="finances-tab" class="settings-tab-content">
                    <div class="card settings-main-card" style="max-width: 900px; margin: 0 auto;">
                        <div class="settings-card-header">
                            <div class="settings-card-icon">üí∞</div>
                            <div>
                                <h2 class="settings-card-title">–°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–∞</h2>
                                <p class="settings-card-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–ø–∏—Å–∫–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ñ–∏–Ω–∞–Ω—Å–∞—Ö</p>
                            </div>
                        </div>
                        <form id="expenseCategoriesForm" class="settings-form">
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üìÇ</span>
                                    <h3 class="settings-section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div style="display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap;">
                                        <input type="text" id="expense-category-input" class="form-input-modern expense-category-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –î–∏–≤–∏–¥–µ–Ω—Ç—ã)" style="flex:1; min-width: 240px;">
                                        <button type="button" class="btn-primary" style="white-space: nowrap;" onclick="window.addExpenseCategorySetting && window.addExpenseCategorySetting()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                                    </div>
                                    <div id="expense-categories-list" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                                    <small style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ –§–∏–Ω–∞–Ω—Å—ã.</small>
                                </div>
                            </div>

                            <div class="settings-form-actions">
                                <button type="submit" class="btn-primary btn-large">
                                    <span style="margin-right: 8px;">üíæ</span>
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–∞
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: Telegram -->
                <div id="telegram-tab" class="settings-tab-content">
                    <div class="card settings-main-card" style="max-width: 900px; margin: 0 auto;">
                        <div class="settings-card-header">
                            <div class="settings-card-icon">üì±</div>
                            <div>
                                <h2 class="settings-card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram</h2>
                                <p class="settings-card-subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Telegram –±–æ—Ç–æ–º –∏ —à–∞–±–ª–æ–Ω—ã
                                    —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
                            </div>
                        </div>
                        <form id="telegramSettingsForm" class="settings-form">
                            <!-- –°–µ–∫—Ü–∏—è: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">ü§ñ</span>
                                    <h3 class="settings-section-title">–¢–æ–∫–µ–Ω –±–æ—Ç–∞</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üîë</span>
                                            –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
                                        </label>
                                        <input type="text" id="telegram_bot_token" class="form-input-modern"
                                            placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz)">
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –¢–æ–∫–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram –±–æ—Ç–æ–º. –ü–æ–ª—É—á–∏—Ç—å –º–æ–∂–Ω–æ —É
                                            <strong>@BotFather</strong> –≤ Telegram
                                        </small>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üîó</span>
                                            –°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞ (–¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞)
                                        </label>
                                        <input type="text" id="telegram_bot_url" class="form-input-modern"
                                            placeholder="https://t.me/your_bot">
                                        <small style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –£–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É –∏–ª–∏ @username –±–æ—Ç–∞. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ—Ä—Ç–∞–ª–µ
                                            –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –±–æ—Ç—É.
                                        </small>
                                    </div>
                                </div>
                            </div>

                            <!-- –°–µ–∫—Ü–∏—è: –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ü–µ–Ω—Ç—Ä (–¢–µ–ª–µ—Ñ–æ–Ω—ã —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞) -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üëî</span>
                                    <h3 class="settings-section-title">–ö–æ–º–∞–Ω–¥–Ω—ã–π —Ü–µ–Ω—Ç—Ä</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>
                                                <span style="margin-right: 6px;">üìû</span>
                                                –¢–µ–ª–µ—Ñ–æ–Ω –î–∏—Ä–µ–∫—Ç–æ—Ä–∞
                                            </label>
                                            <input type="text" id="director_phone" class="form-input-modern"
                                                placeholder="+998901234567">
                                            <small style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                                –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–¥–æ–∫ (–≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ –±–æ—Ç–µ)
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <span style="margin-right: 6px;">üìû</span>
                                                –¢–µ–ª–µ—Ñ–æ–Ω –£—á—Ä–µ–¥–∏—Ç–µ–ª—è
                                            </label>
                                            <input type="text" id="founder_phone" class="form-input-modern"
                                                placeholder="+998901234567">
                                            <small style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                                –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
                                            </small>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-top: 15px;">
                                        <label>
                                            <span style="margin-right: 6px;">üìû</span>
                                            –¢–µ–ª–µ—Ñ–æ–Ω –ö–∞—Å—Å–∏—Ä–∞
                                        </label>
                                        <input type="text" id="cashier_phone" class="form-input-modern"
                                            placeholder="+998901234567">
                                        <small style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –î–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –æ–ø–ª–∞—Ç–∞—Ö
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- –°–µ–∫—Ü–∏—è: –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üìù</span>
                                    <h3 class="settings-section-title">–®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üìÖ</span>
                                            –®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–Ω—è—Ç–∏–∏
                                        </label>
                                        <textarea id="telegram_notification_template" class="form-input-modern" rows="5"
                                            placeholder="üìÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –∑–∞–Ω—è—Ç–∏–µ –≥—Ä—É–ø–ø—ã {group_name} —á–µ—Ä–µ–∑ 3 —á–∞—Å–∞ –≤ {time}.\n\n{additional_text}"></textarea>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –®–∞–±–ª–æ–Ω –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–Ω—è—Ç–∏—è—Ö. –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:<br>
                                            <strong>{group_name}</strong> - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã<br>
                                            <strong>{time}</strong> - –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏—è<br>
                                            <strong>{days}</strong> - –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏<br>
                                            <strong>{additional_text}</strong> - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                                        </small>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">‚≠ê</span>
                                            –®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–∏
                                        </label>
                                        <textarea id="telegram_reward_template" class="form-input-modern" rows="5"
                                            placeholder="‚≠ê –í–∞–º –≤—ã–¥–∞–Ω–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ!\n\n–¢–∏–ø: {reward_name}\n–ë–∞–ª–ª—ã: +{points}\n–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤ –∑–∞ –º–µ—Å—è—Ü: {total_points}\n\n{reason}"></textarea>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –®–∞–±–ª–æ–Ω –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è—Ö. –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:<br>
                                            <strong>{reward_name}</strong> - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è<br>
                                            <strong>{points}</strong> - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤<br>
                                            <strong>{total_points}</strong> - –≤—Å–µ–≥–æ –±–∞–ª–ª–æ–≤ –∑–∞ –º–µ—Å—è—Ü<br>
                                            <strong>{reason}</strong> - –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                                        </small>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üü®</span>
                                            –®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–∞—Ä—Ç–æ—á–∫–µ
                                        </label>
                                        <textarea id="telegram_card_template" class="form-input-modern" rows="5"
                                            placeholder="üü® –í–∞–º –≤—ã–¥–∞–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞!\n\n–¢–∏–ø: {card_name}\n–ü—Ä–∏—á–∏–Ω–∞: {reason}"></textarea>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –®–∞–±–ª–æ–Ω –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö. –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:<br>
                                            <strong>{card_name}</strong> - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏<br>
                                            <strong>{reason}</strong> - –ø—Ä–∏—á–∏–Ω–∞ –≤—ã–¥–∞—á–∏
                                        </small>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üí≥</span>
                                            –®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ
                                        </label>
                                        <textarea id="telegram_payment_template" class="form-input-modern" rows="5"
                                            placeholder="üí≥ –û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞!\n\n–§–ò–û: {full_name}\n–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã: {payment_date}\n–ú–µ—Å—è—Ü: {month}\n–¢–∏–ø –æ–ø–ª–∞—Ç—ã: {payment_type}\n–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã: {amount_paid} —Å—É–º{debt_info}"></textarea>
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –®–∞–±–ª–æ–Ω –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–ø–ª–∞—Ç–µ. –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:<br>
                                            <strong>{full_name}</strong> - –§–ò–û —É—á–µ–Ω–∏–∫–∞<br>
                                            <strong>{payment_date}</strong> - –¥–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã<br>
                                            <strong>{month}</strong> - –º–µ—Å—è—Ü –æ–ø–ª–∞—Ç—ã<br>
                                            <strong>{payment_type}</strong> - —Ç–∏–ø –æ–ø–ª–∞—Ç—ã (–ù–∞–ª–∏—á–Ω—ã–µ, –ö–∞—Ä—Ç–∞, Click, Payme,
                                            Uzum)<br>
                                            <strong>{amount_paid}</strong> - —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã<br>
                                            <strong>{debt_info}</strong> - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–ª–≥–µ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏
                                            –µ—Å—Ç—å –¥–æ–ª–≥)
                                        </small>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-form-actions">
                                <button type="submit" class="btn-primary btn-large">
                                    <span style="margin-right: 8px;">üíæ</span>
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ö–∞–º–µ—Ä–∞ -->
                <div id="camera-tab" class="settings-tab-content">
                    <div class="card settings-main-card" style="max-width: 900px; margin: 0 auto;">
                        <div class="settings-card-header">
                            <div class="settings-card-icon">üé•</div>
                            <div>
                                <h2 class="settings-card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã</h2>
                                <p class="settings-card-subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ RTSP –ø–æ—Ç–æ–∫ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü</p>
                            </div>
                        </div>
                        <form id="cameraSettingsForm" class="settings-form">
                            <div class="settings-section">
                                <div class="settings-section-header">
                                    <span class="settings-section-icon">üîó</span>
                                    <h3 class="settings-section-title">RTSP –ü–æ—Ç–æ–∫</h3>
                                </div>
                                <div class="settings-section-content">
                                    <div class="form-group">
                                        <label>
                                            <span style="margin-right: 6px;">üåê</span>
                                            RTSP URL
                                        </label>
                                        <input type="text" id="rtsp_url_setting" class="form-input-modern"
                                            placeholder="rtsp://admin:password@192.168.1.100:554/h264/ch1/main/av_stream">
                                        <small
                                            style="color: #7f8c8d; display: block; margin-top: 8px; line-height: 1.5;">
                                            –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ-–ø–æ—Ç–æ–∫ –≤–∞—à–µ–π –∫–∞–º–µ—Ä—ã. <br>
                                            <strong>–í–∞–∂–Ω–æ:</strong> –ï—Å–ª–∏ –∫–∞–º–µ—Ä–∞ Ezviz —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å –≤ VLC –æ—Ç–¥–µ–ª—å–Ω–æ,
                                            –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <strong>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (Verification
                                                Code)</strong> —Å
                                            –Ω–∞–∫–ª–µ–π–∫–∏ –Ω–∞ –∫–∞–º–µ—Ä–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–æ–ª—è.
                                        </small>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-form-actions">
                                <button type="submit" class="btn-primary btn-large">
                                    <span style="margin-right: 8px;">üíæ</span>
                                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ì—Ä—É–ø–ø—ã -->
                <div id="groups-tab" class="settings-tab-content">
                    <table class="data-table" id="groupsTable" style="margin-top: 20px;">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–Ω–∏</th>
                                <th>–í—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏—è</th>
                                <th>–û–ø–æ–∑–¥–∞–Ω–∏–µ (–º–∏–Ω)</th>
                                <th>–£—á–µ–Ω–∏–∫–æ–≤</th>
                                <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="groupsTableBody">
                            <tr>
                                <td colspan="7">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –¢–∞—Ä–∏—Ñ—ã -->
                <div id="tariffs-tab" class="settings-tab-content">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ó–∞–Ω—è—Ç–∏–π</th>
                                <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                                <th>–¶–µ–Ω–∞ –∑–∞ –∑–∞–Ω—è—Ç–∏–µ</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="tariffsTableBody">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è -->
                <div id="rewards-tab" class="settings-tab-content">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ë–∞–ª–ª—ã</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="rewardsTableBody">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>

            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –≥—Ä—É–ø–ø (–∏–∑ groups.html) -->
            <div id="addGroupModal" class="modal">
                <div class="modal-content modern-modal">
                    <div class="modal-header-fixed">
                        <h2>–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</h2>
                        <div class="modal-header-actions">
                            <button type="button" onclick="closeAddGroupModal()" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="addGroupForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="addGroupForm" class="modal-form">
                            <div class="form-card">
                                <label class="field-label" for="groupName">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
                                <input type="text" id="groupName" required placeholder="–ì—Ä—É–ø–ø–∞ 1, –ú–ª–∞–¥—à–∞—è...">
                            </div>

                            <div class="form-card">
                                <label class="field-label" for="durationMinutes">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–Ω—è—Ç–∏—è</label>
                                <div style="position: relative; width: 100%;">
                                    <select id="durationMinutes" required
                                        style="width: 100%; padding: 12px 40px 12px 16px; border: 1px solid #e2e8f0; border-radius: 12px; font-size: 0.95rem; background: #fff; appearance: none; -webkit-appearance: none; -moz-appearance: none; cursor: pointer; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                                        <option value="30">30 –º–∏–Ω—É—Ç</option>
                                        <option value="60" selected>1 —á–∞—Å</option>
                                        <option value="90">1 —á–∞—Å 30 –º–∏–Ω—É—Ç</option>
                                        <option value="120">2 —á–∞—Å–∞</option>
                                        <option value="150">2 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                        <option value="180">3 —á–∞—Å–∞</option>
                                        <option value="210">3 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                        <option value="240">4 —á–∞—Å–∞</option>
                                        <option value="270">4 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                    </select>
                                    <div
                                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); pointer-events: none; width: 20px; height: 20px;">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                            stroke="#475569" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <small class="field-hint">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª–∏—Ç—Å—è –æ–¥–Ω–æ –∑–∞–Ω—è—Ç–∏–µ</small>
                            </div>

                            <div class="form-card">
                                <label class="field-label">üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–Ω–∏ –∏ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏–π</label>
                                <small class="field-hint">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–Ω—è—Ç—ã–µ —è—á–µ–π–∫–∏. –ú–æ–∂–Ω–æ
                                    –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–Ω–µ–π.</small>
                                <div id="selectedSlotsDisplay" class="selected-slots-display"
                                    style="margin-bottom: 12px;"></div>
                                <div id="scheduleVisualization" class="schedule-visualization">
                                    <div class="schedule-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
                                </div>
                                <input type="hidden" id="scheduleTime" required>
                                <input type="hidden" id="scheduleDays" required>
                            </div>

                            <div class="form-card">
                                <label class="field-label">üèüÔ∏è –†–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã –Ω–∞ –ø–æ–ª–µ</label>
                                <small class="field-hint">–í—ã–±–µ—Ä–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ —Å—Ç–∞–¥–∏–æ–Ω–∞ –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å —ç—Ç–∞ –≥—Ä—É–ø–ø–∞.
                                    –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ –±–ª–æ–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö.</small>
                                <div id="fieldBlocksVisualization" class="field-blocks-container">
                                    <div class="field-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ö–µ–º—ã –ø–æ–ª—è...</div>
                                </div>
                                <div id="fieldBlocksInfo" class="field-blocks-info"
                                    style="margin-top: 12px; display: none;">
                                    <span class="field-info-label">–í—ã–±—Ä–∞–Ω–æ –±–ª–æ–∫–æ–≤:</span>
                                    <span id="selectedBlocksCount" class="field-info-value">0</span>
                                    <span class="field-info-separator">/</span>
                                    <span id="availableBlocksCount" class="field-info-value">0</span>
                                </div>
                                <input type="hidden" id="fieldBlocks" required>
                            </div>

                            <div class="form-card two-col">
                                <div>
                                    <label class="field-label" for="lateThreshold">–ü–æ—Ä–æ–≥ –æ–ø–æ–∑–¥–∞–Ω–∏—è (–º–∏–Ω—É—Ç)</label>
                                    <input type="number" id="lateThreshold" value="15" min="0" required>
                                </div>
                                <div>
                                    <label class="field-label" for="maxStudents">–ú–∞–∫—Å. —É—á–µ–Ω–∏–∫–æ–≤</label>
                                    <input type="number" id="maxStudents" placeholder="–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π" min="1">
                                </div>
                            </div>

                            <div class="form-card">
                                <label class="field-label" for="notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                                <textarea id="notes" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                            </div>

                            <div id="slotValidationMessage" class="form-alert" style="display:none;"></div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="editGroupModal" class="modal">
                <div class="modal-content modern-modal">
                    <div class="modal-header-fixed">
                        <h2>–û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</h2>
                        <div class="modal-header-actions">
                            <button type="button" onclick="closeEditGroupModal()" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="editGroupForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="editGroupForm" class="modal-form">
                            <input type="hidden" id="editGroupId">

                            <div class="form-card">
                                <label class="field-label" for="editGroupName">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
                                <input type="text" id="editGroupName" required>
                            </div>

                            <div class="form-card">
                                <label class="field-label" for="editDurationMinutes">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–Ω—è—Ç–∏—è</label>
                                <div style="position: relative; width: 100%;">
                                    <select id="editDurationMinutes" required
                                        style="width: 100%; padding: 12px 40px 12px 16px; border: 1px solid #e2e8f0; border-radius: 12px; font-size: 0.95rem; background: #fff; appearance: none; -webkit-appearance: none; -moz-appearance: none; cursor: pointer; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                                        <option value="30">30 –º–∏–Ω—É—Ç</option>
                                        <option value="60">1 —á–∞—Å</option>
                                        <option value="90">1 —á–∞—Å 30 –º–∏–Ω—É—Ç</option>
                                        <option value="120">2 —á–∞—Å–∞</option>
                                        <option value="150">2 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                        <option value="180">3 —á–∞—Å–∞</option>
                                        <option value="210">3 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                        <option value="240">4 —á–∞—Å–∞</option>
                                        <option value="270">4 —á–∞—Å–∞ 30 –º–∏–Ω—É—Ç</option>
                                    </select>
                                    <div
                                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); pointer-events: none; width: 20px; height: 20px;">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                            stroke="#475569" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <small class="field-hint">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª–∏—Ç—Å—è –æ–¥–Ω–æ –∑–∞–Ω—è—Ç–∏–µ</small>
                            </div>

                            <div class="form-card">
                                <label class="field-label">üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–Ω–∏ –∏ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏–π</label>
                                <small class="field-hint">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–Ω—è—Ç—ã–µ —è—á–µ–π–∫–∏. –ú–æ–∂–Ω–æ
                                    –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–Ω–µ–π.</small>
                                <div id="editSelectedSlotsDisplay" class="selected-slots-display"
                                    style="margin-bottom: 12px;"></div>
                                <div id="editScheduleVisualization" class="schedule-visualization">
                                    <div class="schedule-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
                                </div>
                                <input type="hidden" id="editScheduleTime" required>
                                <input type="hidden" id="editScheduleDays" required>
                            </div>

                            <div class="form-card">
                                <label class="field-label">üèüÔ∏è –†–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã –Ω–∞ –ø–æ–ª–µ</label>
                                <small class="field-hint">–í—ã–±–µ—Ä–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ —Å—Ç–∞–¥–∏–æ–Ω–∞ –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å —ç—Ç–∞ –≥—Ä—É–ø–ø–∞.
                                    –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ –±–ª–æ–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö.</small>
                                <div id="editFieldBlocksVisualization" class="field-blocks-container">
                                    <div class="field-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ö–µ–º—ã –ø–æ–ª—è...</div>
                                </div>
                                <div id="editFieldBlocksInfo" class="field-blocks-info"
                                    style="margin-top: 12px; display: none;">
                                    <span class="field-info-label">–í—ã–±—Ä–∞–Ω–æ –±–ª–æ–∫–æ–≤:</span>
                                    <span id="editSelectedBlocksCount" class="field-info-value">0</span>
                                    <span class="field-info-separator">/</span>
                                    <span id="editAvailableBlocksCount" class="field-info-value">0</span>
                                </div>
                                <input type="hidden" id="editFieldBlocks" required>
                            </div>

                            <div class="form-card two-col">
                                <div>
                                    <label class="field-label" for="editLateThreshold">–ü–æ—Ä–æ–≥ –æ–ø–æ–∑–¥–∞–Ω–∏—è (–º–∏–Ω—É—Ç)</label>
                                    <input type="number" id="editLateThreshold" min="0" required>
                                </div>
                                <div>
                                    <label class="field-label" for="editMaxStudents">–ú–∞–∫—Å. —É—á–µ–Ω–∏–∫–æ–≤</label>
                                    <input type="number" id="editMaxStudents" placeholder="–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π" min="1">
                                </div>
                            </div>

                            <div class="form-card">
                                <label class="field-label" for="editNotes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                                <textarea id="editNotes" rows="3"></textarea>
                            </div>

                            <div id="editSlotValidationMessage" class="form-alert" style="display:none;"></div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Ç–∞—Ä–∏—Ñ–æ–≤ -->
            <div id="addTariffModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header-fixed">
                        <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</h2>
                        <div class="modal-header-actions">
                            <button type="button" class="btn-secondary"
                                onclick="document.getElementById('addTariffModal').style.display='none'">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="addTariffForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="addTariffForm">
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ *</label>
                                <input type="text" name="name" required placeholder="–¢–∞—Ä–∏—Ñ 8 –∑–∞–Ω—è—Ç–∏–π">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–∏–π *</label>
                                    <input type="number" name="lessons_count" required min="1" placeholder="8">
                                </div>
                                <div class="form-group">
                                    <label>–°—Ç–æ–∏–º–æ—Å—Ç—å (—Å—É–º) *</label>
                                    <input type="number" name="price" required min="0" step="1000" placeholder="360000">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea name="description" rows="3"
                                    placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –Ω–∞ –º–µ—Å—è—Ü"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="editTariffModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header-fixed">
                        <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞—Ä–∏—Ñ</h2>
                        <div class="modal-header-actions">
                            <button type="button" class="btn-secondary"
                                onclick="document.getElementById('editTariffModal').style.display='none'">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="editTariffForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="editTariffForm">
                            <input type="hidden" id="edit_tariff_id">

                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ *</label>
                                <input type="text" id="edit_name" name="name" required>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–Ω—è—Ç–∏–π *</label>
                                    <input type="number" id="edit_lessons_count" name="lessons_count" required min="1">
                                </div>
                                <div class="form-group">
                                    <label>–°—Ç–æ–∏–º–æ—Å—Ç—å (—Å—É–º) *</label>
                                    <input type="number" id="edit_price" name="price" required min="0" step="1000">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea id="edit_description" name="description" rows="3"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π -->
            <div id="addRewardModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header-fixed">
                        <h2>–î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ</h2>
                        <div class="modal-header-actions">
                            <button type="button" class="btn-secondary"
                                onclick="document.getElementById('addRewardModal').style.display='none'">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="addRewardForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="addRewardForm">
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è *</label>
                                <input type="text" name="name" required placeholder="–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞">
                            </div>

                            <div class="form-group">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ *</label>
                                <input type="number" name="points" required min="1" placeholder="1">
                            </div>

                            <div class="form-group">
                                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea name="description" rows="3"
                                    placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="editRewardModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header-fixed">
                        <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ</h2>
                        <div class="modal-header-actions">
                            <button type="button" class="btn-secondary"
                                onclick="document.getElementById('editRewardModal').style.display='none'">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" form="editRewardForm" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    <div class="modal-body-scrollable">
                        <form id="editRewardForm">
                            <input type="hidden" id="edit_reward_id">

                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è *</label>
                                <input type="text" id="edit_name" name="name" required>
                            </div>

                            <div class="form-group">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ *</label>
                                <input type="number" id="edit_points" name="points" required min="1">
                            </div>

                            <div class="form-group">
                                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea id="edit_description" name="description" rows="3"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
            <script src="{{ url_for('static', filename='js/groups.js') }}"></script>
            <script src="{{ url_for('static', filename='js/tariffs.js') }}"></script>
            <script src="{{ url_for('static', filename='js/rewards.js') }}"></script>
            <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
            <script>
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
                document.addEventListener('DOMContentLoaded', function () {
                    const tabs = document.querySelectorAll('.settings-tab');
                    tabs.forEach(tab => {
                        tab.addEventListener('click', function () {
                            const tabName = this.getAttribute('data-tab');

                            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
                            tabs.forEach(t => t.classList.remove('active'));
                            document.querySelectorAll('.settings-tab-content').forEach(content => {
                                content.classList.remove('active');
                            });

                            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                            this.classList.add('active');
                            const content = document.getElementById(`${tabName}-tab`);
                            if (content) {
                                content.classList.add('active');

                                // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                                const addGroupBtn = document.getElementById('addGroupBtnHeader');
                                const addTariffBtn = document.getElementById('addTariffBtnHeader');
                                const addRewardBtn = document.getElementById('addRewardBtnHeader');

                                if (addGroupBtn) addGroupBtn.style.display = (tabName === 'groups') ? 'block' : 'none';
                                if (addTariffBtn) addTariffBtn.style.display = (tabName === 'tariffs') ? 'block' : 'none';
                                if (addRewardBtn) addRewardBtn.style.display = (tabName === 'rewards') ? 'block' : 'none';

                                // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É
                                if (tabName === 'groups') {
                                    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≥—Ä—É–ø–ø—ã, –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
                                    if (typeof loadGroups === 'function') {
                                        setTimeout(() => loadGroups(), 100);
                                    }
                                } else if (tabName === 'tariffs') {
                                    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã, –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
                                    if (typeof loadTariffs === 'function') {
                                        setTimeout(() => loadTariffs(), 100);
                                    }
                                } else if (tabName === 'rewards') {
                                    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                                    if (typeof loadRewards === 'function') {
                                        setTimeout(() => {
                                            initRewardsHandlers();
                                            loadRewards();
                                        }, 100);
                                    }
                                }
                            }
                        });
                    });
                });

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π
                function initRewardsHandlers() {
                    const addRewardBtn = document.getElementById('addRewardBtnHeader') || document.getElementById('addRewardBtn');
                    const addRewardModal = document.getElementById('addRewardModal');
                    const editRewardModal = document.getElementById('editRewardModal');
                    const addRewardForm = document.getElementById('addRewardForm');
                    const editRewardForm = document.getElementById('editRewardForm');

                    if (!addRewardBtn || !addRewardModal || !editRewardModal || !addRewardForm || !editRewardForm) {
                        console.warn('–≠–ª–µ–º–µ–Ω—Ç—ã –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                        return; // –≠–ª–µ–º–µ–Ω—Ç—ã –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã
                    }

                    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å attachRewardButtons –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—à–∏–º–∏ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
                    if (typeof attachRewardButtons === 'function') {
                        const originalAttachRewardButtons = attachRewardButtons;
                        window.attachRewardButtons = function () {
                            originalAttachRewardButtons();
                            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è
                            attachRewardActionButtons();
                        };
                    } else {
                        // –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–µ–º —Å–≤–æ—é
                        window.attachRewardButtons = function () {
                            attachRewardActionButtons();
                        };
                    }

                    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫ –∫–Ω–æ–ø–∫–∞–º –¥–µ–π—Å—Ç–≤–∏–π
                    function attachRewardActionButtons() {
                        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        document.querySelectorAll('.edit-reward-btn').forEach(btn => {
                            // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                            const newBtn = btn.cloneNode(true);
                            btn.parentNode.replaceChild(newBtn, btn);

                            newBtn.addEventListener('click', async () => {
                                const rewardId = newBtn.getAttribute('data-reward-id');

                                try {
                                    const response = await fetch('/api/rewards');
                                    if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π');

                                    const rewards = await response.json();
                                    const reward = rewards.find(r => r.id == rewardId);

                                    if (reward) {
                                        document.getElementById('edit_reward_id').value = reward.id;
                                        document.getElementById('edit_name').value = reward.name;
                                        document.getElementById('edit_points').value = reward.points;
                                        document.getElementById('edit_description').value = reward.description || '';

                                        editRewardModal.style.display = 'block';
                                    }
                                } catch (error) {
                                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è:', error);
                                    alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è: ' + error.message);
                                }
                            });
                        });

                        // –£–¥–∞–ª–∏—Ç—å
                        document.querySelectorAll('.delete-reward-btn').forEach(btn => {
                            // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                            const newBtn = btn.cloneNode(true);
                            btn.parentNode.replaceChild(newBtn, btn);

                            newBtn.addEventListener('click', async () => {
                                const rewardId = newBtn.getAttribute('data-reward-id');
                                const rewardName = newBtn.getAttribute('data-reward-name');

                                if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ "${rewardName}"?`)) {
                                    return;
                                }

                                try {
                                    const response = await fetch(`/api/rewards/${rewardId}`, {
                                        method: 'DELETE'
                                    });

                                    const result = await response.json();

                                    if (result.success) {
                                        alert('‚úì –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ!');
                                        if (typeof loadRewards === 'function') {
                                            loadRewards();
                                        }
                                    } else {
                                        alert('–û—à–∏–±–∫–∞: ' + (result.message || '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ'));
                                    }
                                } catch (error) {
                                    alert('–û—à–∏–±–∫–∞: ' + error.message);
                                }
                            });
                        });
                    }

                    // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å (–∫–ª–æ–Ω–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã)
                    const newAddBtn = addRewardBtn.cloneNode(true);
                    addRewardBtn.parentNode.replaceChild(newAddBtn, addRewardBtn);

                    // –ü—Ä–∏–≤—è–∑–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                    newAddBtn.addEventListener('click', () => {
                        addRewardModal.style.display = 'block';
                    });

                    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
                    const closeBtns = document.querySelectorAll('#addRewardModal .close, #editRewardModal .close');
                    closeBtns.forEach(btn => {
                        // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                        const newBtn = btn.cloneNode(true);
                        btn.parentNode.replaceChild(newBtn, btn);

                        newBtn.addEventListener('click', () => {
                            addRewardModal.style.display = 'none';
                            editRewardModal.style.display = 'none';
                        });
                    });

                    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–æ–¥–∞–ª–∫–∏
                    const modalClickHandler = (e) => {
                        if (e.target === addRewardModal) addRewardModal.style.display = 'none';
                        if (e.target === editRewardModal) editRewardModal.style.display = 'none';
                    };
                    window.removeEventListener('click', modalClickHandler);
                    window.addEventListener('click', modalClickHandler);

                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                    const newForm = addRewardForm.cloneNode(true);
                    addRewardForm.parentNode.replaceChild(newForm, addRewardForm);

                    newForm.addEventListener('submit', async (e) => {
                        e.preventDefault();

                        const formData = new FormData(e.target);
                        const data = {
                            name: formData.get('name').trim(),
                            points: parseInt(formData.get('points')),
                            description: formData.get('description').trim()
                        };

                        if (!data.name) {
                            alert('–ù–∞–∑–≤–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º');
                            return;
                        }

                        if (data.points < 1) {
                            alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0');
                            return;
                        }

                        try {
                            const response = await fetch('/api/rewards/add', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(data)
                            });

                            const result = await response.json();

                            if (result.success) {
                                alert('‚úì –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');
                                addRewardModal.style.display = 'none';
                                e.target.reset();
                                if (typeof loadRewards === 'function') {
                                    loadRewards();
                                }
                            } else {
                                alert('–û—à–∏–±–∫–∞: ' + (result.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ'));
                            }
                        } catch (error) {
                            alert('–û—à–∏–±–∫–∞: ' + error.message);
                        }
                    });

                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    const newEditForm = editRewardForm.cloneNode(true);
                    editRewardForm.parentNode.replaceChild(newEditForm, editRewardForm);

                    newEditForm.addEventListener('submit', async (e) => {
                        e.preventDefault();

                        const rewardId = document.getElementById('edit_reward_id').value;
                        const formData = new FormData(e.target);
                        const data = {
                            name: formData.get('name').trim(),
                            points: parseInt(formData.get('points')),
                            description: formData.get('description').trim()
                        };

                        if (!data.name) {
                            alert('–ù–∞–∑–≤–∞–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º');
                            return;
                        }

                        if (data.points < 1) {
                            alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0');
                            return;
                        }

                        try {
                            const response = await fetch(`/api/rewards/${rewardId}`, {
                                method: 'PUT',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(data)
                            });

                            const result = await response.json();

                            if (result.success) {
                                alert('‚úì –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!');
                                editRewardModal.style.display = 'none';
                                if (typeof loadRewards === 'function') {
                                    loadRewards();
                                }
                            } else {
                                alert('–û—à–∏–±–∫–∞: ' + (result.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ'));
                            }
                        } catch (error) {
                            alert('–û—à–∏–±–∫–∞: ' + error.message);
                        }
                    });
                }
            </script>
        </div>
    </div>
    </div>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
</body>

</html>